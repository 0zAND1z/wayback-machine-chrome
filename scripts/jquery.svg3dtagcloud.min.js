!function(){window.SVG3DTagCloud=function(t,e){var i={entries:[],width:480,height:480,radius:"70%",radiusMin:75,bgDraw:!0,bgColor:"#000",opacityOver:1,opacityOut:.05,opacitySpeed:6,fov:800,speed:2,fontFamily:"Arial, sans-serif",fontSize:"15",fontColor:"#fff",fontWeight:"normal",fontStyle:"normal",fontStretch:"normal",fontToUpperCase:!1};if(void 0!==e)for(var n in e)e.hasOwnProperty(n)&&i.hasOwnProperty(n)&&(i[n]=e[n]);if(!i.entries.length)return!1;var o,r,s,a,c,u=[],l=!0,d={x:0,y:0},h={x:0,y:0,z:0},f={x:0,y:0},v={sx:0,cx:0,sy:0,cy:0},y=Math.PI/180,m="http://www.w3.org/2000/svg";function g(){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,n=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,l=e,d=n;i.width.toString().indexOf("%")>0||i.height.toString().indexOf("%")>0?(l=Math.round(t.offsetWidth/100*parseInt(i.width)),d=Math.round(l/100*parseInt(i.height))):(l=parseInt(i.width),d=parseInt(i.height)),e<=l&&(l=e),n<=d&&(d=n),s={x:l/2,y:d/2},f.x=i.speed/s.x,f.y=i.speed/s.y,(r=l>=d?d/100*parseInt(i.radius):l/100*parseInt(i.radius))<1&&(r=1),(o=r/2)<i.radiusMin&&(o=i.radiusMin,r=2*o),a.setAttribute("width",l),a.setAttribute("height",d),i.bgDraw&&(c.setAttribute("width",l),c.setAttribute("height",d)),function(t){for(var e=0,i=u.length;e<i;e++)p(u[e],t)}(o)}function p(t,e){var i=t.vectorPosition.x-h.x,n=t.vectorPosition.y-h.y,o=t.vectorPosition.z-h.z,r=Math.sqrt(i*i+n*n+o*o);t.vectorPosition.x/=r,t.vectorPosition.y/=r,t.vectorPosition.z/=r,t.vectorPosition.x*=e,t.vectorPosition.y*=e,t.vectorPosition.z*=e}function x(t,e,n,o,r){var s={};return s.element=document.createElementNS(m,"text"),s.element.setAttribute("x",0),s.element.setAttribute("y",0),s.element.setAttribute("fill",i.fontColor),s.element.setAttribute("font-family",i.fontFamily),s.element.setAttribute("font-size",i.fontSize),s.element.setAttribute("font-weight",i.fontWeight),s.element.setAttribute("font-style",i.fontStyle),s.element.setAttribute("font-stretch",i.fontStretch),s.element.setAttribute("text-anchor","middle"),s.element.textContent=i.fontToUpperCase?e.label.toUpperCase():e.label,s.link=document.createElementNS(m,"a"),s.link.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.url),s.link.setAttribute("target",e.target),s.link.addEventListener("mouseover",A,!0),s.link.addEventListener("mouseout",P,!0),s.link.appendChild(s.element),s.index=t,s.mouseOver=!1,s.vectorPosition={x:n,y:o,z:r},s.vector2D={x:0,y:0},a.appendChild(s.link),s}function w(t){for(var e=function(t){for(var e=0,i=u.length;e<i;e++){var n=u[e];if(n.element.getAttribute("x")===t.getAttribute("x")&&n.element.getAttribute("y")===t.getAttribute("y"))return n}}(t),i=0,n=u.length;i<n;i++){var o=u[i];o.index===e.index?o.mouseOver=!0:o.mouseOver=!1}}function b(){requestAnimFrame(b),function(){var t=f.x*d.x-i.speed,e=i.speed-f.y*d.y,n=t*y,a=e*y;v.sx=Math.sin(n),v.cx=Math.cos(n),v.sy=Math.sin(a),v.cy=Math.cos(a);for(var c=0,h=u.length;c<h;c++){var m=u[c];if(l){var g=m.vectorPosition.x,p=m.vectorPosition.y*v.sy+m.vectorPosition.z*v.cy;m.vectorPosition.x=g*v.cx+p*v.sx,m.vectorPosition.y=m.vectorPosition.y*v.cy+m.vectorPosition.z*-v.sy,m.vectorPosition.z=g*-v.sx+p*v.cx}var x,w=i.fov/(i.fov+m.vectorPosition.z);m.vector2D.x=m.vectorPosition.x*w+s.x,m.vector2D.y=m.vectorPosition.y*w+s.y,m.element.setAttribute("x",m.vector2D.x),m.element.setAttribute("y",m.vector2D.y),l?(x=(o-m.vectorPosition.z)/r)<i.opacityOut&&(x=i.opacityOut):(x=parseFloat(m.element.getAttribute("opacity")),m.mouseOver?x+=(i.opacityOver-x)/i.opacitySpeed:x+=(i.opacityOut-x)/i.opacitySpeed),m.element.setAttribute("opacity",x)}u=u.sort(function(t,e){return e.vectorPosition.z-t.vectorPosition.z})}()}function A(t){l=!1,w(t.target),t.target.style.border="thick solid yellow",console.log(t.target.style)}function P(t){l=!0}function S(t){d=function(t,e){var i=t.getBoundingClientRect();return{x:e.clientX-i.left,y:e.clientY-i.top}}(a,t)}function M(t){g()}window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},(a=document.createElementNS(m,"svg")).addEventListener("mousemove",S),t.appendChild(a),i.bgDraw&&((c=document.createElementNS(m,"rect")).setAttribute("x",0),c.setAttribute("y",0),c.setAttribute("fill",i.bgColor),a.appendChild(c)),function(){for(var t=1,e=i.entries.length+1;t<e;t++){var n=Math.acos((2*t-1)/e-1),o=Math.sqrt(e*Math.PI)*n,r=Math.cos(o)*Math.sin(n),s=Math.sin(o)*Math.sin(n),a=Math.cos(n),c=x(t-1,i.entries[t-1],r,s,a);u.push(c)}}(),g(),b(),window.addEventListener("resize",M)}}(),"undefined"!=typeof jQuery&&function(t){t.fn.svg3DTagCloud=function(e){return this.each(function(){t.data(this,"plugin_SVG3DTagCloud")||t.data(this,"plugin_SVG3DTagCloud",new SVG3DTagCloud(this,e))})}}(jQuery);